!function(){"use strict";function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e){return e[e.length-1]}function b(t,...e){return e.forEach(e=>{t.includes(e)||t.push(e)}),t}function l(e,t){return e?e.split(t):[]}function c(e,t,i){return(void 0===t||t<=e)&&(void 0===i||e<=i)}function W(e,t,i){return e<t?t:i<e?i:e}function r(e,t,a={},s=0,i=""){i+=`<${Object.keys(a).reduce((e,t)=>{let i=a[t];return`${e} ${t}="${i="function"==typeof i?i(s):i}"`},e)}></${e}>`;var n=s+1;return n<t?r(e,t,a,n,i):i}function e(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function s(e){return new Date(e).setHours(0,0,0,0)}function h(){return(new Date).setHours(0,0,0,0)}function k(...e){switch(e.length){case 0:return h();case 1:return s(e[0])}var t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function u(e,t){e=new Date(e);return e.setDate(e.getDate()+t)}function f(e,t){e=new Date(e),t=e.getMonth()+t;let i=t%12;i<0&&(i+=12);t=e.setMonth(t);return e.getMonth()!==i?e.setDate(0):t}function p(e,t){var e=new Date(e),i=e.getMonth(),t=e.setFullYear(e.getFullYear()+t);return 1===i&&2===e.getMonth()?e.setDate(0):t}function H(e,t){return(e-t+7)%7}function n(e,t,i=0){var a=new Date(e).getDay();return u(e,H(t,i)-H(a,i))}function g(e,t){e=new Date(e).getFullYear();return Math.floor(e/t)*t}function x(e,t,i){return 1!==t&&2!==t?e:(e=new Date(e),1===t?i?e.setMonth(e.getMonth()+1,0):e.setDate(1):i?e.setFullYear(e.getFullYear()+1,0,0):e.setMonth(0,1),e.setHours(0,0,0,0))}const M=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,j=/[\s!-/:-@[-`{-~年月日]+/;let i={};const T={y(e,t){return new Date(e).setFullYear(parseInt(t,10))},m(e,t,i){e=new Date(e);let a=parseInt(t,10)-1;if(isNaN(a)){if(!t)return NaN;const s=t.toLowerCase();t=e=>e.toLowerCase().startsWith(s);if((a=(a=i.monthsShort.findIndex(t))<0?i.months.findIndex(t):a)<0)return NaN}return e.setMonth(a),e.getMonth()!==function e(t){return-1<t?t%12:e(t+12)}(a)?e.setDate(0):e.getTime()},d(e,t){return new Date(e).setDate(parseInt(t,10))}},_={d(e){return e.getDate()},dd(e){return t(e.getDate(),2)},D(e,t){return t.daysShort[e.getDay()]},DD(e,t){return t.days[e.getDay()]},m(e){return e.getMonth()+1},mm(e){return t(e.getMonth()+1,2)},M(e,t){return t.monthsShort[e.getMonth()]},MM(e,t){return t.months[e.getMonth()]},y(e){return e.getFullYear()},yy(e){return t(e.getFullYear(),2).slice(-2)},yyyy(e){return t(e.getFullYear(),4)}};function t(e,t){return e.toString().padStart(t,"0")}function K(e){if("string"!=typeof e)throw new Error("Invalid date format.");if(e in i)return i[e];const n=e.split(M),s=e.match(new RegExp(M,"g"));if(0===n.length||!s)throw new Error("Invalid date format.");const t=s.map(e=>_[e]),r=Object.keys(T).reduce((e,t)=>{return s.find(e=>"D"!==e[0]&&e[0].toLowerCase()===t)&&e.push(t),e},[]);return i[e]={parser(e,i){const a=e.split(j).reduce((e,t,i)=>{return 0<t.length&&s[i]&&("M"===(i=s[i][0])?e.m=t:"D"!==i&&(e[i]=t)),e},{});return r.reduce((e,t)=>{t=T[t](e,a[t],i);return isNaN(t)?e:t},h())},formatter(a,s){return t.reduce((e,t,i)=>e+(""+n[i]+t(a,s)),"")+d(n)}}}function S(e,t,i){var a;return e instanceof Date||"number"==typeof e?(a=s(e),isNaN(a)?void 0:a):e?"today"===e?h():t&&t.toValue?(a=t.toValue(e,t,i),isNaN(a)?void 0:s(a)):K(t).parser(e,i):void 0}function a(e,t,i){return isNaN(e)||!e&&0!==e?"":(e="number"==typeof e?new Date(e):e,t.toDisplay?t.toDisplay(e,t,i):K(t).formatter(e,i))}const R=document.createRange();function O(e){return R.createContextualFragment(e)}function I(e){return e.parentElement||(e.parentNode instanceof ShadowRoot?e.parentNode.host:void 0)}function m(e){return e.getRootNode().activeElement===e}function o(e){"none"!==e.style.display&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function v(e){"none"===e.style.display&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function w(e){e.firstChild&&(e.removeChild(e.firstChild),w(e))}const D=new WeakMap,{addEventListener:P,removeEventListener:q}=EventTarget.prototype;function C(e,t){let i=D.get(e);i||(i=[],D.set(e,i)),t.forEach(e=>{P.call(...e),i.push(e)})}function $(e){var t=D.get(e);t&&(t.forEach(e=>{q.call(...e)}),D.delete(e))}if(!Event.prototype.composedPath){const Oe=(e,t=[])=>{t.push(e);let i;return e.parentNode?i=e.parentNode:e.host?i=e.host:e.defaultView&&(i=e.defaultView),i?Oe(i,t):t};Event.prototype.composedPath=function(){return Oe(this.target)}}function J(e,t){var i="function"==typeof t?t:e=>e instanceof Element&&e.matches(t);return function e(t,i,a){var[t,...s]=t;return i(t)?t:t!==a&&"HTML"!==t.tagName&&0!==s.length?e(s,i,a):void 0}(e.composedPath(),i,e.currentTarget)}const E={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},F={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"»",orientation:"auto",pickLevel:0,prevArrow:"«",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},{language:V,format:U,weekStart:z}=F;function X(e,t){return e.length<6&&0<=t&&t<7?b(e,t):e}function G(e){return(e+6)%7}function Q(e,t,i,a){e=S(e,t,i);return void 0!==e?e:a}function Z(e,t,i=3){e=parseInt(e,10);return 0<=e&&e<=i?e:t}function ee(t,i){const a=Object.assign({},t),s={};var e,t=i.constructor.locales;const n=i.rangeSideIndex;let{format:r,language:d,locale:o,maxDate:l,maxView:c,minDate:h,pickLevel:u,startView:f,weekStart:p}=i.config||{};if(a.language){let e;a.language!==d&&(t[a.language]?e=a.language:void 0===t[e=a.language.split("-")[0]]&&(e=!1)),delete a.language,e&&(d=s.language=e,i=o||t[V],o=Object.assign({format:U,weekStart:z},t[V]),d!==V&&Object.assign(o,t[d]),s.locale=o,r===i.format&&(r=s.format=o.format),p===i.weekStart)&&(p=s.weekStart=o.weekStart,s.weekEnd=G(o.weekStart))}a.format&&(t="function"==typeof a.format.toDisplay,i="function"==typeof a.format.toValue,e=M.test(a.format),(t&&i||e)&&(r=s.format=a.format),delete a.format);let g=u,m=(void 0!==a.pickLevel&&(g=Z(a.pickLevel,2),delete a.pickLevel),g!==u&&(g>u&&(void 0===a.minDate&&(a.minDate=h),void 0===a.maxDate)&&(a.maxDate=l),a.datesDisabled||(a.datesDisabled=[]),u=s.pickLevel=g),h),v=l,w=(void 0!==a.minDate&&(t=k(0,0,1),(m=null===a.minDate?t:Q(a.minDate,r,o,m))!==t&&(m=x(m,u,!1)),delete a.minDate),void 0!==a.maxDate&&(void 0!==(v=null===a.maxDate?void 0:Q(a.maxDate,r,o,v))&&(v=x(v,u,!0)),delete a.maxDate),v<m?(h=s.minDate=v,l=s.maxDate=m):(h!==m&&(h=s.minDate=m),l!==v&&(l=s.maxDate=v)),a.datesDisabled&&(s.datesDisabled=a.datesDisabled.reduce((e,t)=>{t=S(t,r,o);return void 0!==t?b(e,x(t,u,n)):e},[]),delete a.datesDisabled),void 0!==a.defaultViewDate&&(void 0!==(i=S(a.defaultViewDate,r,o))&&(s.defaultViewDate=i),delete a.defaultViewDate),void 0!==a.weekStart&&(e=Number(a.weekStart)%7,isNaN(e)||(p=s.weekStart=e,s.weekEnd=G(e)),delete a.weekStart),a.daysOfWeekDisabled&&(s.daysOfWeekDisabled=a.daysOfWeekDisabled.reduce(X,[]),delete a.daysOfWeekDisabled),a.daysOfWeekHighlighted&&(s.daysOfWeekHighlighted=a.daysOfWeekHighlighted.reduce(X,[]),delete a.daysOfWeekHighlighted),void 0!==a.maxNumberOfDates&&(0<=(t=parseInt(a.maxNumberOfDates,10))&&(s.maxNumberOfDates=t,s.multidate=1!==t),delete a.maxNumberOfDates),a.dateDelimiter&&(s.dateDelimiter=String(a.dateDelimiter),delete a.dateDelimiter),c),D=(void 0!==a.maxView&&(w=Z(a.maxView,c),delete a.maxView),(w=u>w?u:w)!==c&&(c=s.maxView=w),f);if(void 0!==a.startView&&(D=Z(a.startView,D),delete a.startView),D<u?D=u:D>c&&(D=c),D!==f&&(s.startView=D),a.prevArrow&&(0<(i=O(a.prevArrow)).childNodes.length&&(s.prevArrow=i.childNodes),delete a.prevArrow),a.nextArrow&&(0<(e=O(a.nextArrow)).childNodes.length&&(s.nextArrow=e.childNodes),delete a.nextArrow),void 0!==a.disableTouchKeyboard&&(s.disableTouchKeyboard="ontouchstart"in document&&!!a.disableTouchKeyboard,delete a.disableTouchKeyboard),a.orientation&&(t=a.orientation.toLowerCase().split(/\s+/g),s.orientation={x:t.find(e=>"left"===e||"right"===e)||"auto",y:t.find(e=>"top"===e||"bottom"===e)||"auto"},delete a.orientation),void 0!==a.todayBtnMode){switch(a.todayBtnMode){case 0:case 1:s.todayBtnMode=a.todayBtnMode}delete a.todayBtnMode}return Object.keys(a).forEach(e=>{void 0!==a[e]&&y(F,e)&&(s[e]=a[e])}),s}const te=e(`<div class="datepicker">
  <div class="datepicker-picker">
    <div class="datepicker-header">
      <div class="datepicker-title"></div>
      <div class="datepicker-controls">
        <button type="button" class="%buttonClass% prev-btn"></button>
        <button type="button" class="%buttonClass% view-switch"></button>
        <button type="button" class="%buttonClass% next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls">
        <button type="button" class="%buttonClass% today-btn"></button>
        <button type="button" class="%buttonClass% clear-btn"></button>
      </div>
    </div>
  </div>
</div>`),ie=e(`<div class="days">
  <div class="days-of-week">${r("span",7,{class:"dow"})}</div>
  <div class="datepicker-grid">${r("span",42)}</div>
</div>`),ae=e(`<div class="calendar-weeks">
  <div class="days-of-week"><span class="dow"></span></div>
  <div class="weeks">${r("span",6,{class:"week"})}</div>
</div>`);class se{constructor(e,t){Object.assign(this,t,{picker:e,element:O('<div class="datepicker-view"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(e){void 0!==e.pickLevel&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}performBeforeHook(e,t,i){let a=this.beforeShow(new Date(i));switch(typeof a){case"boolean":a={enabled:a};break;case"string":a={classes:a}}var s;a&&(!1===a.enabled&&(e.classList.add("disabled"),b(this.disabled,t)),a.classes&&(i=a.classes.split(/\s+/),e.classList.add(...i),i.includes("disabled"))&&b(this.disabled,t),a.content)&&(s=e,i=a.content,w(s),i instanceof DocumentFragment?s.appendChild(i):"string"==typeof i?s.appendChild(O(i)):"function"==typeof i.forEach&&i.forEach(e=>{s.appendChild(e)}))}}class ne extends se{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){t&&(t=O(ie).firstChild,this.dow=t.firstChild,this.grid=t.lastChild,this.element.appendChild(t)),super.init(e)}setOptions(e){let t;var i;y(e,"minDate")&&(this.minDate=e.minDate),y(e,"maxDate")&&(this.maxDate=e.maxDate),e.datesDisabled&&(this.datesDisabled=e.datesDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),void 0!==e.todayHighlight&&(this.todayHighlight=e.todayHighlight),void 0!==e.weekStart&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale&&(i=this.locale=e.locale,this.dayNames=i.daysMin,this.switchLabelFormat=i.titleFormat,t=!0),void 0!==e.beforeShowDay&&(this.beforeShow="function"==typeof e.beforeShowDay?e.beforeShowDay:void 0),void 0!==e.calendarWeeks&&(e.calendarWeeks&&!this.calendarWeeks?(i=O(ae).firstChild,this.calendarWeeks={element:i,dow:i.firstChild,weeks:i.lastChild},this.element.insertBefore(i,this.element.firstChild)):this.calendarWeeks&&!e.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null)),void 0!==e.showDaysOfWeek&&(e.showDaysOfWeek?(v(this.dow),this.calendarWeeks&&v(this.calendarWeeks.dow)):(o(this.dow),this.calendarWeeks&&o(this.calendarWeeks.dow))),t&&Array.from(this.dow.children).forEach((e,t)=>{t=(this.weekStart+t)%7;e.textContent=this.dayNames[t],e.className=this.daysOfWeekDisabled.includes(t)?"dow disabled":"dow"})}updateFocus(){var e=new Date(this.picker.viewDate),t=e.getFullYear(),e=e.getMonth(),i=k(t,e,1),a=n(i,this.weekStart,this.weekStart);this.first=i,this.last=k(t,e+1,0),this.start=a,this.focused=this.picker.viewDate}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){this.today=this.todayHighlight?h():void 0,this.disabled=[...this.datesDisabled];var e=a(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(e),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const i=n(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((e,t)=>{e.textContent=(e=i,t,e=n(e=u(e,7*t),4,1),t=n(new Date(e).setMonth(0,4),4,1),Math.round((e-t)/6048e5)+1)})}Array.from(this.grid.children).forEach((e,t)=>{var i=e.classList,t=u(this.start,t),a=new Date(t),s=a.getDay();e.className="datepicker-cell "+this.cellClass,e.dataset.date=t,e.textContent=a.getDate(),t<this.first?i.add("prev"):t>this.last&&i.add("next"),this.today===t&&i.add("today"),(t<this.minDate||t>this.maxDate||this.disabled.includes(t))&&i.add("disabled"),this.daysOfWeekDisabled.includes(s)&&(i.add("disabled"),b(this.disabled,t)),this.daysOfWeekHighlighted.includes(s)&&i.add("highlighted"),this.range&&([a,s]=this.range,a<t&&t<s&&i.add("range"),t===a&&i.add("range-start"),t===s)&&i.add("range-end"),this.selected.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,t,t)})}refresh(){const[i,a]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{var t=Number(e.dataset.date),e=e.classList;t>i&&t<a&&e.add("range"),t===i&&e.add("range-start"),t===a&&e.add("range-end"),this.selected.includes(t)&&e.add("selected"),t===this.focused&&e.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function re(e,t){if(e&&e[0]&&e[1]){var[[e,i],[a,s]]=e;if(!(t<e||a<t))return[e===t?i:-1,a===t?s:12]}}class de extends se{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(O(r("span",12,{"data-month":e=>e})))),super.init(e)}setOptions(e){var t;e.locale&&(this.monthNames=e.locale.monthsShort),y(e,"minDate")&&(void 0===e.minDate?this.minYear=this.minMonth=this.minDate=void 0:(t=new Date(e.minDate),this.minYear=t.getFullYear(),this.minMonth=t.getMonth(),this.minDate=t.setDate(1))),y(e,"maxDate")&&(void 0===e.maxDate?this.maxYear=this.maxMonth=this.maxDate=void 0:(t=new Date(e.maxDate),this.maxYear=t.getFullYear(),this.maxMonth=t.getMonth(),this.maxDate=k(this.maxYear,this.maxMonth+1,0))),this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e.beforeShowMonth&&(this.beforeShow="function"==typeof e.beforeShowMonth?e.beforeShowMonth:void 0)}updateFocus(){var e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>{var t=new Date(t),i=t.getFullYear(),t=t.getMonth();return void 0===e[i]?e[i]=[t]:b(e[i],t),e},{}),t&&t.dates&&(this.range=t.dates.map(e=>{e=new Date(e);return isNaN(e)?void 0:[e.getFullYear(),e.getMonth()]}))}render(){this.disabled=this.datesDisabled.reduce((e,t)=>{t=new Date(t);return this.year===t.getFullYear()&&e.push(t.getMonth()),e},[]),this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const r=this.selected[this.year]||[],d=this.year<this.minYear||this.year>this.maxYear,o=this.year===this.minYear,l=this.year===this.maxYear,c=re(this.range,this.year);Array.from(this.grid.children).forEach((e,t)=>{var i,a,s=e.classList,n=k(this.year,t,1);e.className="datepicker-cell "+this.cellClass,this.isMinView&&(e.dataset.date=n),e.textContent=this.monthNames[t],(d||o&&t<this.minMonth||l&&t>this.maxMonth||this.disabled.includes(t))&&s.add("disabled"),c&&([i,a]=c,i<t&&t<a&&s.add("range"),t===i&&s.add("range-start"),t===a)&&s.add("range-end"),r.includes(t)&&s.add("selected"),t===this.focused&&s.add("focused"),this.beforeShow&&this.performBeforeHook(e,t,n)})}refresh(){const i=this.selected[this.year]||[],[a,s]=re(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach((e,t)=>{e=e.classList;t>a&&t<s&&e.add("range"),t===a&&e.add("range-start"),t===s&&e.add("range-end"),i.includes(t)&&e.add("selected"),t===this.focused&&e.add("focused")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}class oe extends se{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=10*this.step,this.beforeShowOption="beforeShow"+[...this.cellClass].reduce((e,t,i)=>e+(i?t:t.toUpperCase()),""),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(O(r("span",12)))),super.init(e)}setOptions(e){y(e,"minDate")&&(void 0===e.minDate?this.minYear=this.minDate=void 0:(this.minYear=g(e.minDate,this.step),this.minDate=k(this.minYear,0,1))),y(e,"maxDate")&&(void 0===e.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=g(e.maxDate,this.step),this.maxDate=k(this.maxYear,11,31))),this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e[this.beforeShowOption]&&(e=e[this.beforeShowOption],this.beforeShow="function"==typeof e?e:void 0)}updateFocus(){var e=new Date(this.picker.viewDate),t=g(e,this.navStep),i=t+9*this.step;this.first=t,this.last=i,this.start=t-this.step,this.focused=g(e,this.step)}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>b(e,g(t,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(e=>{if(void 0!==e)return g(e,this.step)}))}render(){this.disabled=this.datesDisabled.map(e=>new Date(e).getFullYear()),this.picker.setViewSwitchLabel(this.first+"-"+this.last),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{var i,a=e.classList,s=this.start+t*this.step,n=k(s,0,1);e.className="datepicker-cell "+this.cellClass,this.isMinView&&(e.dataset.date=n),e.textContent=e.dataset.year=s,0===t?a.add("prev"):11===t&&a.add("next"),(s<this.minYear||s>this.maxYear||this.disabled.includes(s))&&a.add("disabled"),this.range&&([t,i]=this.range,t<s&&s<i&&a.add("range"),s===t&&a.add("range-start"),s===i)&&a.add("range-end"),this.selected.includes(s)&&a.add("selected"),s===this.focused&&a.add("focused"),this.beforeShow&&this.performBeforeHook(e,s,n)})}refresh(){const[i,a]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{var t=Number(e.textContent),e=e.classList;t>i&&t<a&&e.add("range"),t===i&&e.add("range-start"),t===a&&e.add("range-end"),this.selected.includes(t)&&e.add("selected"),t===this.focused&&e.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function N(e,t){var i={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:i}))}function L(e,t){var{minDate:i,maxDate:a}=e.config,{currentView:s,viewDate:n}=e.picker;let r;switch(s.id){case 0:r=f(n,t);break;case 1:r=p(n,t);break;default:r=p(n,t*s.navStep)}r=W(r,i,a),e.picker.changeFocus(r).render()}function le(e){var t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function ce(e){e.config.updateOnBlur?e.update({revert:!0}):e.refresh("input"),e.hide()}function he(e,t){var e=e.picker,i=new Date(e.viewDate),a=e.currentView.id,t=1===a?f(i,t-i.getMonth()):p(i,t-i.getFullYear());e.changeFocus(t).changeView(a-1).render()}function ue(e){e.preventDefault()}const fe=["left","top","right","bottom"].reduce((e,t)=>(e[t]="datepicker-orient-"+t,e),{}),pe=e=>e&&e+"px";function ge(e,t){if(void 0!==t.title&&(t.title?(e.controls.title.textContent=t.title,v):(e.controls.title.textContent="",o))(e.controls.title),t.prevArrow){const s=e.controls.prevBtn;w(s),t.prevArrow.forEach(e=>{s.appendChild(e.cloneNode(!0))})}if(t.nextArrow){const n=e.controls.nextBtn;w(n),t.nextArrow.forEach(e=>{n.appendChild(e.cloneNode(!0))})}var i,a;t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),void 0!==t.todayBtn&&(t.todayBtn?v:o)(e.controls.todayBtn),(y(t,"minDate")||y(t,"maxDate"))&&({minDate:i,maxDate:a}=e.datepicker.config,e.controls.todayBtn.disabled=!c(h(),i,a)),void 0!==t.clearBtn&&(t.clearBtn?v:o)(e.controls.clearBtn)}function me(e){var{dates:e,config:t}=e;return W(0<e.length?d(e):t.defaultViewDate,t.minDate,t.maxDate)}function ve(e,t){var i=new Date(e.viewDate),a=new Date(t),{id:s,year:n,first:r,last:d}=e.currentView,o=a.getFullYear();switch(e.viewDate=t,o!==i.getFullYear()&&N(e.datepicker,"changeYear"),a.getMonth()!==i.getMonth()&&N(e.datepicker,"changeMonth"),s){case 0:return t<r||d<t;case 1:return o!==n;default:return o<r||d<o}}function we(e){return window.getComputedStyle(e).direction}class De{constructor(e){var t=(this.datepicker=e)["config"],i=te.replace(/%buttonClass%/g,t.buttonClass),i=this.element=O(i).firstChild,[a,s,n]=i.firstChild.children,r=a.firstElementChild,[a,d,o]=a.lastElementChild.children,[n,l]=n.firstChild.children,r={title:r,prevBtn:a,viewSwitch:d,nextBtn:o,todayBtn:n,clearBtn:l},a=(this.main=s,this.controls=r,e.inline?"inline":"dropdown");i.classList.add("datepicker-"+a),ge(this,t),this.viewDate=me(e),C(e,[[i,"mousedown",ue],[s,"click",function(e,t){var i,a;(t=J(t,".datepicker-cell"))&&!t.classList.contains("disabled")&&({id:i,isMinView:a}=e.picker.currentView,a?e.setDate(Number(t.dataset.date)):he(e,1===i?Number(t.dataset.month):Number(t.dataset.year)))}.bind(null,e)],[r.viewSwitch,"click",function(e){le(e)}.bind(null,e)],[r.prevBtn,"click",function(e){L(e,-1)}.bind(null,e)],[r.nextBtn,"click",function(e){L(e,1)}.bind(null,e)],[r.todayBtn,"click",function(e){var t=e.picker,i=h();if(1===e.config.todayBtnMode){if(e.config.autohide)return void e.setDate(i);e.setDate(i,{render:!1}),t.update()}t.viewDate!==i&&t.changeFocus(i),t.changeView(0).render()}.bind(null,e)],[r.clearBtn,"click",function(e){e.setDate({clear:!0})}.bind(null,e)]]),this.views=[new ne(this),new de(this),new oe(this,{id:2,name:"years",cellClass:"year",step:1}),new oe(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.container?t.container.appendChild(this.element):e.inputField.after(this.element)}setOptions(t){ge(this,t),this.views.forEach(e=>{e.init(t,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){var e,t,i;this.active||({datepicker:e,element:t}=this,e.inline?t.classList.add("active"):((i=we(e.inputField))!==we(I(t))?t.dir=i:t.dir&&t.removeAttribute("dir"),t.style.visiblity="hidden",t.classList.add("active"),this.place(),t.style.visiblity="",e.config.disableTouchKeyboard&&e.inputField.blur()),this.active=!0,N(e,"show"))}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,N(this.datepicker,"hide"))}place(){var{classList:e,offsetParent:t,style:i}=this.element,{config:a,inputField:s}=this.datepicker,{width:n,height:r}=this.element.getBoundingClientRect(),{left:d,top:o,right:l,bottom:c,width:h,height:u}=s.getBoundingClientRect();let{x:f,y:p}=a.orientation,g=d,m=o;t!==document.body&&t?(a=t.getBoundingClientRect(),g-=a.left-t.scrollLeft,m-=a.top-t.scrollTop):(g+=window.scrollX,m+=window.scrollY);a=function e(t){t=I(t);if(t!==document.body&&t)return"visible"!==window.getComputedStyle(t).overflow?t:e(t)}(s);let v=0,w=0,{clientWidth:D,clientHeight:y}=document.documentElement,b=(a&&(0<(t=a.getBoundingClientRect()).top&&(w=t.top),0<t.left&&(v=t.left),t.right<D&&(D=t.right),t.bottom<y)&&(y=t.bottom),0);"auto"===f&&(d<v?(f="left",b=v-d):d+n>D?(f="right",D<l&&(b=D-l)):f="rtl"!==we(s)||l-n<v?"left":"right"),"right"===f&&(g+=h-n),g+=b,"top"===(p="auto"===p?o-r>w&&c+r>y?"top":"bottom":p)?m-=r:m+=u,e.remove(...Object.values(fe)),e.add(fe[f],fe[p]),i.left=pe(g),i.top=pe(m)}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevBtnDisabled(e){this.controls.prevBtn.disabled=e}setNextBtnDisabled(e){this.controls.nextBtn.disabled=e}changeView(e){var t=this.currentView,e=this.views[e];return e.id!==t.id&&(this.currentView=e,this._renderMethod="render",N(this.datepicker,"changeView"),this.main.replaceChild(e.element,t.element)),this}changeFocus(e){return this._renderMethod=ve(this,e)?"render":"refreshFocus",this.views.forEach(e=>{e.updateFocus()}),this}update(){var e=me(this.datepicker);return this._renderMethod=ve(this,e)?"render":"refresh",this.views.forEach(e=>{e.updateFocus(),e.updateSelection()}),this}render(e=!0){e=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[e]()}}function B(e,t,i,a){e=e.picker;const s=e.currentView,n=s.step||1;let r=e.viewDate,d,o;switch(s.id){case 0:r=a?u(r,7*i):(t.ctrlKey||t.metaKey?p:u)(r,i),d=u,o=e=>s.disabled.includes(e);break;case 1:r=f(r,a?4*i:i),d=f,o=e=>{var e=new Date(e),{year:t,disabled:i}=s;return e.getFullYear()===t&&i.includes(e.getMonth())};break;default:r=p(r,i*(a?4:1)*n),d=p,o=e=>s.disabled.includes(g(e,n))}void 0!==(r=function e(t,i,a,s,n,r){if(c(t,n,r))return s(t)?e(i(t,a),i,a,s,n,r):t}(r,d,i<0?-n:n,o,s.minDate,s.maxDate))&&e.changeFocus(r).render()}function ye(e,t){return e.map(e=>a(e,t.format,t.locale)).join(t.dateDelimiter)}function be(e,t,i=!1){const{config:a,dates:s,rangeSideIndex:n}=e;if(0===t.length)return i?[]:void 0;let r=t.reduce((e,t)=>{t=S(t,a.format,a.locale);return void 0===t||!c(t=x(t,a.pickLevel,n),a.minDate,a.maxDate)||e.includes(t)||a.datesDisabled.includes(t)||!(0<a.pickLevel)&&a.daysOfWeekDisabled.includes(new Date(t).getDay())||e.push(t),e},[]);return 0!==r.length?(a.multidate&&!i&&(r=r.reduce((e,t)=>(s.includes(t)||e.push(t),e),s.filter(e=>!r.includes(e)))),a.maxNumberOfDates&&r.length>a.maxNumberOfDates?r.slice(-1*a.maxNumberOfDates):r):void 0}function A(e,t=3,i=!0){var a,{config:s,picker:n,inputField:r}=e;2&t&&(a=n.active?s.pickLevel:s.startView,n.update().changeView(a).render(i)),1&t&&r&&(r.value=ye(e.dates,s))}function ke(e,t,i){let{clear:a,render:s,autohide:n,revert:r}=i;(s=void 0===s?!0:s)?void 0===n&&(n=e.config.autohide):n=!1;i=be(e,t,a);(i||r)&&(i&&i.toString()!==e.dates.toString()?(e.dates=i,A(e,s?3:1),N(e,"changeDate")):A(e,1),n)&&e.hide()}class xe{constructor(e,t={},i=void 0){(e.datepicker=this).element=e;var a=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:null,defaultViewDate:h(),maxDate:void 0,minDate:void 0},ee(F,this)),s=this.inline="INPUT"!==e.tagName;let n;if(s?a.container=e:(t.container&&(a.container=t.container instanceof HTMLElement?t.container:document.querySelector(t.container)),(n=this.inputField=e).classList.add("datepicker-input")),i){const o=i.inputs.indexOf(n);var r=i.datepickers;if(o<0||1<o||!Array.isArray(r))throw Error("Invalid rangepicker object.");r[o]=this,Object.defineProperty(this,"rangepicker",{get(){return i}}),Object.defineProperty(this,"rangeSideIndex",{get(){return o}})}this._options=t,Object.assign(a,ee(t,this));let d;s?(d=l(e.dataset.date,a.dateDelimiter),delete e.dataset.date):d=l(n.value,a.dateDelimiter),this.dates=[];r=be(this,d),r&&0<r.length&&(this.dates=r),n&&(n.value=ye(this.dates,a)),t=this.picker=new De(this);s?this.show():(e=function(e,t){const{element:i,picker:a}=e;if(a.active||m(i)){const s=a.element;J(t,e=>e===i||e===s)||ce(e)}}.bind(null,this),C(this,[[n,"keydown",function(e,t){var i=t.key;if("Tab"===i)ce(e);else{var a=e.picker,{id:s,isMinView:n}=a.currentView;if(a.active){if(e.editMode)return void("Enter"===i?e.exitEditMode({update:!0,autohide:e.config.autohide}):"Escape"===i&&a.hide());if("ArrowLeft"===i)if(t.ctrlKey||t.metaKey)L(e,-1);else{if(t.shiftKey)return void e.enterEditMode();B(e,t,-1,!1)}else if("ArrowRight"===i)if(t.ctrlKey||t.metaKey)L(e,1);else{if(t.shiftKey)return void e.enterEditMode();B(e,t,1,!1)}else if("ArrowUp"===i)if(t.ctrlKey||t.metaKey)le(e);else{if(t.shiftKey)return void e.enterEditMode();B(e,t,-1,!0)}else if("ArrowDown"===i){if(t.shiftKey&&!t.ctrlKey&&!t.metaKey)return void e.enterEditMode();B(e,t,1,!0)}else{if("Enter"!==i)return void("Escape"===i?a.hide():"Backspace"!==i&&"Delete"!==i&&(1!==i.length||t.ctrlKey||t.metaKey)||e.enterEditMode());if(n)return void e.setDate(a.viewDate);a.changeView(s-1).render()}}else{if("ArrowDown"!==i)return void("Enter"===i?e.update():"Escape"===i&&a.show());a.show()}t.preventDefault()}}.bind(null,this)],[n,"focus",function(e){e.config.showOnFocus&&!e._showing&&e.show()}.bind(null,this)],[n,"mousedown",function(e,t){const i=t.target;(e.picker.active||e.config.showOnClick)&&(i._active=m(i),i._clicking=setTimeout(()=>{delete i._active,delete i._clicking},2e3))}.bind(null,this)],[n,"click",function(e,t){(t=t.target)._clicking&&(clearTimeout(t._clicking),delete t._clicking,t._active&&e.enterEditMode(),delete t._active,e.config.showOnClick)&&e.show()}.bind(null,this)],[n,"paste",function(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}.bind(null,this)],[document,"mousedown",e],[document,"touchstart",e],[window,"resize",t.place.bind(t)]]))}static formatDate(e,t,i){return a(e,t,i&&E[i]||E.en)}static parseDate(e,t,i){return S(e,t,i&&E[i]||E.en)}static get locales(){return E}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){var t=this.picker,i=ee(e,this);Object.assign(this._options,e),Object.assign(this.config,i),t.setOptions(i),A(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;m(this.inputField)||this.config.disableTouchKeyboard||(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),$(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(t=void 0){var e=t?e=>a(e,t,this.config.locale):e=>new Date(e);return this.config.multidate?this.dates.map(e):0<this.dates.length?e(this.dates[0]):void 0}setDate(...e){var t=[...e],i={},e=d(e),e=("object"!=typeof e||Array.isArray(e)||e instanceof Date||!e||Object.assign(i,t.pop()),Array.isArray(t[0])?t[0]:t);ke(this,e,i)}update(e=void 0){this.inline||(e=Object.assign(e||{},{clear:!0,render:!0}),ke(this,l(this.inputField.value,this.config.dateDelimiter),e))}refresh(e=void 0,t=!1){e&&"string"!=typeof e&&(t=e,e=void 0);let i;A(this,i="picker"===e?2:"input"===e?1:3,!t)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit"))}exitEditMode(e=void 0){!this.inline&&this.editMode&&(e=Object.assign({update:!1},e),delete this.editMode,this.inputField.classList.remove("in-edit"),e.update)&&this.update(e)}}function Me(e){e=Object.assign({},e);return delete e.inputs,delete e.allowOneSidedRange,delete e.maxNumberOfDates,e}function Se(e,t,i,a){C(e,[[i,"changeDate",t]]),new xe(i,a,e)}function Y(e,t){var i,a,s,n,r;e._updating||(e._updating=!0,void 0!==(t=t.target).datepicker&&(a={render:!1},n=(i=e.datepickers)[t=e.inputs.indexOf(t)].dates[0],r=i[s=0===t?1:0].dates[0],void 0!==n&&void 0!==r?0===t&&r<n?(i[0].setDate(r,a),i[1].setDate(n,a)):1===t&&n<r&&(i[0].setDate(n,a),i[1].setDate(r,a)):e.allowOneSidedRange||void 0===n&&void 0===r||(a.clear=!0,i[s].setDate(i[t].dates,a)),i[0].picker.update().render(),i[1].picker.update().render(),delete e._updating))}window.Datepicker=xe,window.DateRangePicker=class{constructor(e,t={}){var i=Array.isArray(t.inputs)?t.inputs:Array.from(e.querySelectorAll("input"));if(!(i.length<2)){(e.rangepicker=this).element=e,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!t.allowOneSidedRange;e=Y.bind(null,this),i=Me(t);const a=[];Object.defineProperty(this,"datepickers",{get(){return a}}),Se(this,e,this.inputs[0],i),Se(this,e,this.inputs[1],i),Object.freeze(a),0<a[0].dates.length?Y(this,{target:this.inputs[0]}):0<a[1].dates.length&&Y(this,{target:this.inputs[1]})}}get dates(){return 2===this.datepickers.length?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}setOptions(e){this.allowOneSidedRange=!!e.allowOneSidedRange;e=Me(e);this.datepickers[0].setOptions(e),this.datepickers[1].setOptions(e)}destroy(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),$(this),delete this.element.rangepicker}getDates(t=void 0){const i=t?e=>a(e,t,this.datepickers[0].config.locale):e=>new Date(e);return this.dates.map(e=>void 0===e?e:i(e))}setDates(e,t){var[i,a]=this.datepickers,s=this.dates;this._updating=!0,i.setDate(e),a.setDate(t),delete this._updating,a.dates[0]!==s[1]?Y(this,{target:this.inputs[1]}):i.dates[0]!==s[0]&&Y(this,{target:this.inputs[0]})}}}();